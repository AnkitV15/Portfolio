---
// src/components/Header.astro
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasHackathons = siteConfig.hackathons && siteConfig.hackathons.length > 0;
---

<header id="header" class="header">
  <div class="header-container">
    <a href="/" class="header-logo">
      {siteConfig.name}
    </a>

    <nav class="desktop-nav">
      <ul class="nav-list">
        <li><a href="#experience" class="nav-link">Experience</a></li>
        {hasProjects && <li><a href="#projects" class="nav-link">Projects</a></li>}
        {hasHackathons && <li><a href="#hackathons" class="nav-link">Hackathons</a></li>}
        <li><a href="#about" class="nav-link">About</a></li>
        <li><a href="#contact" class="nav-link">Contact</a></li>
      </ul>
    </nav>

    <button id="mobile-menu-button" class="mobile-menu-button">
      <img src="Portfolio/hamburger-menu.svg" alt="Menu" class="w-6 h-6" />
    </button>
  </div>
</header>

<div id="mobile-menu" class="mobile-menu">
  <nav>
    <ul class="mobile-nav-list">
      <li><a href="#experience" class="nav-link-mobile">Experience</a></li>
      {hasProjects && <li><a href="#projects" class="nav-link-mobile">Projects</a></li>}
      {hasHackathons && <li><a href="#hackathons" class="nav-link-mobile">Hackathons</a></li>}
      <li><a href="#about" class="nav-link-mobile">About</a></li>
      <li><a href="#contact" class="nav-link-mobile">Contact</a></li>
    </ul>
  </nav>
</div>

<script>
  // Dynamic background on scroll
  window.addEventListener("scroll", () => {
    const header = document.getElementById("header");
    if (window.scrollY > 50) {
      header?.classList.add("scrolled");
    } else {
      header?.classList.remove("scrolled");
    }
  });

  // Mobile menu toggle functionality
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileNavLinks = document.querySelectorAll(".nav-link-mobile");

  mobileMenuButton?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("is-open");
  });

  mobileNavLinks.forEach(link => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.remove("is-open");
    });
  });
</script>

<style>
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px; 
  }

  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    transition: all 0.3s ease-in-out;
  }
  
  .header.scrolled {
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  }

  .header-container {
    max-width: 1280px; /* Corresponds to max-w-7xl */
    margin: 0 auto;
    padding: 1rem 1.5rem; /* Corresponds to px-6 py-4 */
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .header-logo {
    font-size: 1.25rem; /* Corresponds to text-xl */
    font-weight: 700;
    color: #111827; /* Corresponds to text-gray-900 */
  }

  .desktop-nav {
    display: none;
  }
  @media (min-width: 768px) { /* Corresponds to md:block */
    .desktop-nav {
      display: block;
    }
  }

  .nav-list {
    display: flex;
    align-items: center;
    gap: 2rem; /* Corresponds to gap-8 */
  }

  .nav-link {
    color: #4b5563; /* Corresponds to text-gray-600 */
    font-weight: 500;
    transition: color 0.2s ease-in-out;
  }
  .nav-link:hover {
    color: #111827; /* Corresponds to hover:text-gray-900 */
  }

  /* Mobile Menu Styles */
  .mobile-menu-button {
    z-index: 50;
  }
  @media (min-width: 768px) { /* Corresponds to md:hidden */
    .mobile-menu-button {
      display: none;
    }
  }

  .mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: white;
    z-index: 40;
    display: none; /* Initially hidden */
    align-items: center;
    justify-content: center;
  }

  .mobile-menu.is-open {
    display: flex; /* Show when open */
  }

  .mobile-nav-list {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem; /* Corresponds to gap-8 */
    font-size: 1.5rem; /* Corresponds to text-2xl */
  }

  .nav-link-mobile {
    color: #374151; /* Corresponds to text-gray-700 */
    font-weight: 500;
    transition: color 0.2s ease-in-out;
  }

  .nav-link-mobile:hover {
    color: black;
  }
</style>